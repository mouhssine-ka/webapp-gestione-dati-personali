<div class="container d-flex mt-5 justify-content-center">
    <button  class="btn btn-primary mx-3" (click)="tornaIndietro()"> <span id="leftArrow">&#8592;</span> lista completa</button>
    <div *ngIf="anagrafica" class="container mt-3">
        <h3>Dettagli {{anagrafica.nome}} {{anagrafica.cognome}}</h3>
        <div class="form-container">
            <form class="form" [formGroup]="anagraficaForm" (ngSubmit)="onSubmit()">
                <div class="form-group">
                    <label for="nome">Nome:</label>  
                    <input #inputField type="text" id="nome" name="nome" formControlName="nome" [readOnly]="isReadOnly" class="form-control">
                    <span *ngIf="(nome?.dirty) && nome?.value !== '' && nome?.errors?.['whitespace']" class="text-danger">
                        <small>Il nome non può contenere solo spazi vuoti</small>
                      </span>
                      <span *ngIf="nome?.invalid && nome?.errors?.['required'] && (nome?.touched || formSubmited)" class="text-danger">
                        <small>campo obbligatorio</small>
                      </span>
                </div>
                <div class="form-group">
                    <label for="cognome">Cognome:</label>
                    <input type="text" id="cognome" name="cognome" formControlName="cognome" [readOnly]="isReadOnly" class="form-control">
                    <span *ngIf="(cognome?.dirty) && cognome?.value !== '' && cognome?.errors?.['whitespace']" class="text-danger">
                        <small>Il cognome non può contenere solo spazi vuoti</small>
                    </span>
                    <span *ngIf="cognome?.invalid &&  cognome?.errors?.['required'] && (cognome?.touched || formSubmited)" class="text-danger">
                        <small>campo obbligatorio</small>
                    </span>
                </div>
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="text" id="email" name="email" formControlName="email" [readOnly]="isReadOnly" class="form-control">
                    <span *ngIf="email?.invalid && email?.dirty" class="text-danger">
                        <small *ngIf="email?.value !== ''">formato email non valido</small>
                        <small *ngIf="email?.errors?.['required'] && (email?.touched || formSubmited)">campo obbligatorio</small>
                    </span>
                </div>
                <div class="form-group">
                <label for="indirizzo">Indirizzo:</label>
                <input *ngIf="anagrafica.comune !== null" type="text" id="indirizzo" name="indirizzo" formControlName="indirizzo" [readOnly]="isReadOnly" class="form-control">
                </div>
                <div class="form-group">
                <label for="localita">Località:</label>
                <input type="text" id="localita" name="localita" formControlName="localita" [readOnly]="isReadOnly" class="form-control">
                </div>
                <div class="form-group">
                <label for="comune">Comune:</label>
                <input type="text" id="comune" name="comune" formControlName="comune" [readOnly]="isReadOnly" class="form-control">
                </div>
                <div class="form-group">
                    <label for="provincia">Provincia:</label>
                    <input *ngIf="isReadOnly" type="text" id="provincia" name="provincia" formControlName="provincia" [readOnly]="isReadOnly" class="form-control">
                    <select *ngIf="!isReadOnly" name="provincia" id="provincia" formControlName="provincia" class="p-2 form-select">
                        <option [value]="null" selected disabled>Provincia</option>
                        <option value="AG">Agrigento</option>
                        <option value="AL">Alessandria</option>
                        <option value="AN">Ancona</option>
                        <option value="AO">Aosta</option>
                        <option value="AR">Arezzo</option>
                        <option value="AP">Ascoli Piceno</option>
                        <option value="AT">Asti</option>
                        <option value="AV">Avellino</option>
                        <option value="BA">Bari</option>
                        <option value="BT">Barletta-Andria-Trani</option>
                        <option value="BL">Belluno</option>
                        <option value="BN">Benevento</option>
                        <option value="BG">Bergamo</option>
                        <option value="BI">Biella</option>
                        <option value="BO">Bologna</option>
                        <option value="BZ">Bolzano</option>
                        <option value="BS">Brescia</option>
                        <option value="BR">Brindisi</option>
                        <option value="CA">Cagliari</option>
                        <option value="CL">Caltanissetta</option>
                        <option value="CB">Campobasso</option>
                        <option value="CE">Caserta</option>
                        <option value="CT">Catania</option>
                        <option value="CZ">Catanzaro</option>
                        <option value="CH">Chieti</option>
                        <option value="CO">Como</option>
                        <option value="CS">Cosenza</option>
                        <option value="CR">Cremona</option>
                        <option value="KR">Crotone</option>
                        <option value="CN">Cuneo</option>
                        <option value="EN">Enna</option>
                        <option value="FM">Fermo</option>
                        <option value="FE">Ferrara</option>
                        <option value="FI">Firenze</option>
                        <option value="FG">Foggia</option>
                        <option value="FC">Forl&igrave;-Cesena</option>
                        <option value="FR">Frosinone</option>
                        <option value="GE">Genova</option>
                        <option value="GO">Gorizia</option>
                        <option value="GR">Grosseto</option>
                        <option value="IM">Imperia</option>
                        <option value="IS">Isernia</option>
                        <option value="AQ">L'aquila</option>
                        <option value="SP">La spezia</option>
                        <option value="LT">Latina</option>
                        <option value="LE">Lecce</option>
                        <option value="LC">Lecco</option>
                        <option value="LI">Livorno</option>
                        <option value="LO">Lodi</option>
                        <option value="LU">Lucca</option>
                        <option value="MC">Macerata</option>
                        <option value="MN">Mantova</option>
                        <option value="MS">Massa-Carrara</option>
                        <option value="MT">Matera</option>
                        <option value="ME">Messina</option>
                        <option value="MI">Milano</option>
                        <option value="MO">Modena</option>
                        <option value="MB">Monza e Brianza</option>
                        <option value="NA">Napoli</option>
                        <option value="NO">Novara</option>
                        <option value="NU">Nuoro</option>
                        <option value="OR">Oristano</option>
                        <option value="PD">Padova</option>
                        <option value="PA">Palermo</option>
                        <option value="PR">Parma</option>
                        <option value="PV">Pavia</option>
                        <option value="PG">Perugia</option>
                        <option value="PU">Pesaro e Urbino</option>
                        <option value="PE">Pescara</option>
                        <option value="PC">Piacenza</option>
                        <option value="PI">Pisa</option>
                        <option value="PT">Pistoia</option>
                        <option value="PN">Pordenone</option>
                        <option value="PZ">Potenza</option>
                        <option value="PO">Prato</option>
                        <option value="RG">Ragusa</option>
                        <option value="RA">Ravenna</option>
                        <option value="RC">Reggio Calabria</option>
                        <option value="RE">Reggio Emilia</option>
                        <option value="RI">Rieti</option>
                        <option value="RN">Rimini</option>
                        <option value="RM">Roma</option>
                        <option value="RO">Rovigo</option>
                        <option value="SA">Salerno</option>
                        <option value="SS">Sassari</option>
                        <option value="SV">Savona</option>
                        <option value="SI">Siena</option>
                        <option value="SR">Siracusa</option>
                        <option value="SO">Sondrio</option>
                        <option value="SU">Sud Sardegna</option>
                        <option value="TA">Taranto</option>
                        <option value="TE">Teramo</option>
                        <option value="TR">Terni</option>
                        <option value="TO">Torino</option>
                        <option value="TP">Trapani</option>
                        <option value="TN">Trento</option>
                        <option value="TV">Treviso</option>
                        <option value="TS">Trieste</option>
                        <option value="UD">Udine</option>
                        <option value="VA">Varese</option>
                        <option value="VE">Venezia</option>
                        <option value="VB">Verbano-Cusio-Ossola</option>
                        <option value="VC">Vercelli</option>
                        <option value="VR">Verona</option>
                        <option value="VV">Vibo valentia</option>
                        <option value="VI">Vicenza</option>
                        <option value="VT">Viterbo</option>
                    </select>
                </div>
                <div class="form-group">
                <label for="note">Note:</label>
                <textarea id="note" name="note" formControlName="note" [readOnly]="isReadOnly" class="form-control"> </textarea>
                </div>


                <div *ngIf="!isReadOnly" class="mt-3 d-flex justify-content-between">
                    <button type="submit" class="btn btn-success text-white px-4">Conferma</button>   
                    <button class="btn btn-danger text-white px-4" (click)="anullaModifica()">Anulla</button>
                </div>
                <button *ngIf="isReadOnly" class="btn btn-warning mt-3" (click)="modificaDati()">Modifica</button>
            </form>
        </div>
    </div>
</div>